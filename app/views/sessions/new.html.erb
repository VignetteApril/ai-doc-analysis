<%# app/views/sessions/new.html.erb %>

<div class="login-body">
  <div class="header-logo">
    <%= image_tag "logo.png", alt: "Logo", class: "logo-img" %>
    <span>AI公文校对系统</span>
  </div>

  <div class="main-container">
    <div class="login-card">
      <h2 class="login-title">用户登录</h2>

      <%# 通用提醒消息组件 %>
      <% if flash.any? %>
        <div class="flash-container">
          <% flash.each do |type, message| %>
            <% if message.present? %>
              <% css_class = case type.to_sym
                   when :notice, :success then "flash-success"
                   when :alert, :error, :danger then "flash-error"
                   when :warning then "flash-warning"
                   when :info then "flash-info"
                   else "flash-info"
                   end %>
              <% icon_class = case type.to_sym
                   when :notice, :success then "fa-circle-check"
                   when :alert, :error, :danger then "fa-circle-exclamation"
                   when :warning then "fa-triangle-exclamation"
                   when :info then "fa-circle-info"
                   else "fa-circle-info"
                   end %>
              <div class="flash-message <%= css_class %>">
                <i class="fa-solid <%= icon_class %>"></i>
                <span><%= message %></span>
                <button class="flash-close" type="button" aria-label="关闭提醒">
                  <i class="fa-solid fa-xmark"></i>
                </button>
              </div>
            <% end %>
          <% end %>
        </div>
      <% end %>

      <%# 登录表单 %>
      <%= form_with url: login_path, method: :post, local: true do %>

        <div class="form-group">
          <div class="input-wrapper">
            <i class="fa-regular fa-user"></i>
            <%= email_field_tag :email, params[:email],
                                class: "form-control",
                                placeholder: "请输入用户名/邮箱",
                                required: true,
                                autofocus: true %>
          </div>
        </div>

        <div class="form-group">
          <div class="input-wrapper">
            <i class="fa-solid fa-lock"></i>
            <%= password_field_tag :password, nil,
                                   class: "form-control",
                                   placeholder: "请输入登录密码",
                                   required: true %>
          </div>
        </div>

        <div class="form-options">
          <label class="remember-me">
            <%= check_box_tag :remember_me, 1, params[:remember_me] %>
            <span>记住密码</span>
          </label>
        </div>

        <%= submit_tag "立即登录", class: "btn-login" %>

      <% end %>
    </div>
  </div>
</div>